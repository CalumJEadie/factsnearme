<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SeeSaw</title>
    <link href='http://fonts.googleapis.com/css?family=Courgette' rel='stylesheet' type='text/css'>
    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Set Apple icons for when prototype is saved to home screen -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="touch-icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="touch-icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="touch-icons/apple-touch-icon-57x57.png">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <!-- Include the compiled Ratchet CSS -->
    <link rel="stylesheet" href="ratchet.css">
    
    <link rel="stylesheet" href="site.css">

    <!-- Include the compiled Ratchet JS -->
    <script src="ratchet.js"></script>

  </head>
  <body>

  <!-- Make sure all your bars are the first things in your <body> -->
  <!--<header class="bar-title">
    <h1 class="title">DiscoRound</h1>
  </header>-->

  <!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
  

<div class = "content">

<!--<a class="button-main button-negative button-block" onclick="getLocation()">Tell me something interesting</a>-->

<div class="slider">
  <ul>
    <li id = "item_0">
        <div class = "image">
          <center>
            <a href="#"><img id = "image_1" src="img/1.jpg" style="height:100%;"></a>
          </center>
          <div id="image_text_title" style="display:none">
            <center>
            <h1><span></span>
              <br /></h1>
            </center>
          </div>
          <div id="image_text" style="display:none">
            <p>
              <span>Text goes here.</span>
            </p>
          </div>
        </div>
    </li>
    
  </ul>
</div>

<script>

//window.setInterval(function(){
//  getLocation()
//}, 5000);

getLocation();

function getLocation()
  {
  navigator.geolocation.getCurrentPosition(showPosition);
  }
function showPosition(position)
  {
  var url = "/articles/" + position.coords.latitude + "/" + position.coords.longitude;
  $.ajax({
      type: 'GET',
      url: url, 
      success: function(json) { 
          console.log(json)
          console.log(json['articles'])
          var articles = json['articles']
          for (var i = 0; i < articles.length; i++) {
              var title = articles[i].title;
              var summary = articles[i].summary;
              var image = articles[i].image;
              var url = articles[i].url;
              $('#image_text_title span').html(title);
              $('#image_text span').html(summary);
              $("#image_1").attr("src", image);

          }
      },
  });
  }

</script>

<script>
    $(document).ready(function(){
      $('#image_1').click(function() {
          $('#image_text_title').fadeIn();
          $('#image_text').fadeOut();
          $('#image_1').fadeTo(1000, 0.3);
      });

      $('#image_text_title').click(function() {
          $('#image_text_title').fadeOut();
          $('#image_text').fadeIn();
          $('#image_1').fadeTo(1000, 0.3);
      });

      $('#image_text').click(function() {
          $('#image_text').fadeOut();
          $('#image_1').fadeTo(1000, 1.0);
      });

    });

</script>


</div>

  </body>
</html>